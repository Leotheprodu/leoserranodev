---
import { Icon } from 'astro-icon/components';
import DownloadButton from '@components/layouts/mainLayout/DownloadButton.astro';
import Link from './Link.astro';
import socialLinks from '@data/socialLinks.json';
import { navLinks, type NavLink } from '@/data/navLinks';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import { LanguageSwitcher } from './LanguageSwitcher.tsx';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<nav
  id="mainMenu"
  class="h-full w-[20rem] lg:w-full bg-neutral-200 lg:bg-white dark:bg-gray-900 shadow-lg lg:shadow-none overflow-x-auto"
  aria-label="Primary"
>
  <div class="flex flex-col gap-10 px-10 py-14 w-full h-full">
    <div class="flex gap-5 items-center">
      <a
        class="no-underline flex group gap-3 items-center hover:text-neutral-700"
        href={t('link.home')}
      >
        <Icon
          class="group-hover:fill-neutral-700 dark:group-hover:fill-neutral-100 dark:fill-neutral-400"
          name="braille-l"
          width={20}
        />
        <h1
          class="font-bold text-xl dark:text-neutral-300 dark:group-hover:text-neutral-100"
        >
          {t('nav.iconText')}
        </h1>
      </a>
      <LanguageSwitcher lang={lang} client:only="react" />
    </div>
    <div class="flex w-full gap-3">
      <div
        class="bg-[url('/leo.jpg')] bg-cover bg-no-repeat bg-center rounded-full w-14 shadow-md"
      >
      </div>

      <div class="w-full">
        <h2 class="font-semibold dark:text-neutral-50 text-lg">
          Leonardo Serrano A.
        </h2>
        <p class="text-sm dark:text-neutral-100">{t('nav.title')}</p>
      </div>
    </div>
    <ul class="flex flex-col gap-3">
      {
        navLinks.map((item: NavLink) => (
          <Link name={t(item.name)} path={t(item.path)} icon={item.icon} />
        ))
      }
    </ul>
    <div class="flex flex-col gap-3">
      <h4
        class="uppercase font-semibold text-neutral-500 dark:text-neutral-400 text-sm"
      >
        {t('nav.socialLinks')}
      </h4>
      <ul class="flex flex-col gap-5">
        {
          socialLinks.map((item) => (
            <Link
              newWindow
              name={item.name}
              path={item.path}
              icon={item.icon}
            />
          ))
        }
      </ul>
    </div>
    <div class="w-full h-full">
      <DownloadButton />
    </div>
  </div>
</nav>
